# ğŸ“Š VISUAL GUIDE - USE CASES & MIDDLEWARE

## ğŸ¬ **HR SYSTEM - USE CASE SEQUENCE DIAGRAMS**

### **Use Case 1: Create New Employee**

```
HR Manager              HR Web UI              Java API              MySQL DB
    â”‚                     â”‚                       â”‚                      â”‚
    â”‚â”€â”€â”€ Click "Create" â”€â”€â†’â”‚                       â”‚                      â”‚
    â”‚                     â”‚                       â”‚                      â”‚
    â”‚                     â”‚ (Validate data)      â”‚                      â”‚
    â”‚                     â”‚                       â”‚                      â”‚
    â”‚                     â”‚ POST /api/employees â”€â†’â”‚                      â”‚
    â”‚                     â”‚   { name, dept... }   â”‚                      â”‚
    â”‚                     â”‚                       â”‚ INSERT employee      â”‚
    â”‚                     â”‚                       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’   â”‚
    â”‚                     â”‚                       â”‚                      â”‚
    â”‚                     â”‚ â† Response (201)      â”‚                      â”‚
    â”‚                     â”‚   { id, name... }     â”‚                      â”‚
    â”‚ â† Show success â”€â”€â”€â”€â”€â”€â”‚                       â”‚                      â”‚
    â”‚                     â”‚                       â”‚                      â”‚
    
âœ… New employee created successfully!
```

---

### **Use Case 2: View Department Employees**

```
HR Manager              HR Web UI              Java API              MySQL DB
    â”‚                     â”‚                       â”‚                      â”‚
    â”‚â”€ Click "Dept HR" â”€â”€â†’â”‚                       â”‚                      â”‚
    â”‚                     â”‚                       â”‚                      â”‚
    â”‚                     â”‚ GET /api/dept/HR/empsâ”‚                      â”‚
    â”‚                     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                      â”‚
    â”‚                     â”‚                       â”‚ SELECT from employeesâ”‚
    â”‚                     â”‚                       â”‚ WHERE dept="HR"      â”‚
    â”‚                     â”‚                       â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
    â”‚                     â”‚ â† Response (200)      â”‚                      â”‚
    â”‚                     â”‚   { employees: [...]}â”‚                      â”‚
    â”‚ â† Display list â”€â”€â”€â”€â”‚                       â”‚                      â”‚
    â”‚                     â”‚                       â”‚                      â”‚

âœ… Show all 5 employees in HR department
```

---

## ğŸ¥ **HOSPITAL SYSTEM - USE CASE SEQUENCE DIAGRAMS**

### **Use Case 1: Create Doctor**

```
Admin                 Hospital UI           Auth Check            DB
  â”‚                       â”‚                     â”‚                  â”‚
  â”‚â”€ Login â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚                     â”‚                  â”‚
  â”‚                       â”‚ POST /auth/login   â”‚                  â”‚
  â”‚                       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚                  â”‚
  â”‚                       â”‚ (Check creds)      â”‚                  â”‚
  â”‚ â† Send token â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                    â”‚                  â”‚
  â”‚  (JWT token)          â”‚ â† token            â”‚                  â”‚
  â”‚                       â”‚                    â”‚                  â”‚
  â”‚â”€ Fill doctor info â”€â”€â”€â”€â†’â”‚                    â”‚                  â”‚
  â”‚  (name, dept, spec)   â”‚                    â”‚                  â”‚
  â”‚                       â”‚ POST /api/doctors?token=xxx           â”‚
  â”‚                       â”‚ { name, spec, dept}                   â”‚
  â”‚                       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ â”‚                  â”‚
  â”‚                       â”‚ â‘  Check token     â”‚                  â”‚
  â”‚                       â”‚ â‘¡ Check role      â”‚                  â”‚
  â”‚                       â”‚ â‘¢ Validate data   â”‚                  â”‚
  â”‚                       â”‚ â‘£ Check duplicate â”‚                  â”‚
  â”‚                       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚                       â”‚                     â”‚  INSERT doctor  â”‚
  â”‚                       â”‚                     â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚ â† Show success â”€â”€â”€â”€â”€â”€â”€â”‚ â† (201) Created    â”‚                  â”‚
  â”‚                       â”‚                     â”‚                  â”‚

âœ… Doctor created with ID 123
```

---

### **Use Case 2: Book Appointment**

```
Patient              Hospital UI        Doctor Check           Appointment DB
  â”‚                      â”‚                    â”‚                     â”‚
  â”‚â”€ View doctors â”€â”€â”€â”€â”€â”€â†’â”‚                    â”‚                     â”‚
  â”‚                      â”‚ GET /doctors      â”‚                     â”‚
  â”‚ â† Show list â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â† [doctors...]     â”‚                     â”‚
  â”‚                      â”‚                    â”‚                     â”‚
  â”‚â”€ Select "Dr. A" â”€â”€â”€â”€â†’â”‚                    â”‚                     â”‚
  â”‚â”€ Pick date/time â”€â”€â”€â”€â†’â”‚                    â”‚                     â”‚
  â”‚                      â”‚ POST /api/appointments?token=xxxx       â”‚
  â”‚                      â”‚ { doctor_id, date, time }               â”‚
  â”‚                      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚                     â”‚
  â”‚                      â”‚ â‘  Verify token    â”‚                     â”‚
  â”‚                      â”‚ â‘¡ Check availability                     â”‚
  â”‚                      â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚
  â”‚                      â”‚                    â”‚   INSERT appt       â”‚
  â”‚ â† Confirm â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â† (201) Booked    â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                      â”‚   { appt_id, ...}  â”‚                     â”‚
  â”‚                      â”‚                    â”‚                     â”‚

âœ… Appointment booked: Dr. A on 2024-02-15 at 10:00
```

---

## ğŸ” **MIDDLEWARE REQUEST FLOW DIAGRAM**

```
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚   CLIENT REQUEST     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  BODY PARSER         â”‚
        â”‚ (Parse JSON)         â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  AUTHENTICATION MIDDLEWARE         â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚ â”‚ Token in:                     â”‚ â”‚
        â”‚ â”‚ â‘  Authorization header       â”‚ â”‚
        â”‚ â”‚ â‘¡ URL query (?token=xxx)    â”‚ â”‚
        â”‚ â”‚ â‘¢ Cookies                    â”‚ â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚ Output: req.user = { ... }        â”‚
        â”‚ Error: code: 3 (no/invalid token) â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”˜
                   â”‚                      â”‚
          âœ“ Valid  â”‚                      âœ— Invalid
                   â”‚                      â”‚
                   â–¼                      â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  VALIDATION      â”‚    â”‚  ERROR RESPONSE  â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚  { code: 3 }     â”‚
        â”‚ â”‚ Check:       â”‚ â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ â”‚ â‘  Required   â”‚ â”‚
        â”‚ â”‚ â‘¡ Data types â”‚ â”‚
        â”‚ â”‚ â‘¢ Ranges     â”‚ â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚ Error: code: 1   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”˜
                   â”‚   â”‚
          âœ“ Valid  â”‚   âœ— Invalid
                   â”‚   â”‚
                   â–¼   â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  AUTHORIZATION           â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
        â”‚ â”‚ Check user role:      â”‚â”‚
        â”‚ â”‚ admin, doctor, viewer â”‚â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
        â”‚ Error: code: 4           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
                   â”‚          â”‚
          âœ“ Auth   â”‚          âœ— Denied
                   â”‚          â”‚
                   â–¼          â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ BUSINESS LOGIC  â”‚  â”‚ ERROR RESPONSE â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  { code: 4 }   â”‚
        â”‚ â”‚ â‘  Query DB  â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚ â”‚ â‘¡ Process   â”‚ â”‚
        â”‚ â”‚ â‘¢ Save data â”‚ â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â”‚ Error: code: 2,5â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”˜
                   â”‚  â”‚
          âœ“ OK     â”‚  âœ— Error
                   â”‚  â”‚
                   â–¼  â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ LOGGING            â”‚
        â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
        â”‚ â”‚ â€¢ Request path â”‚ â”‚
        â”‚ â”‚ â€¢ Status code  â”‚ â”‚
        â”‚ â”‚ â€¢ Duration     â”‚ â”‚
        â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ SEND RESPONSE        â”‚
        â”‚ { code: 0/1/2/3/4/5,â”‚
        â”‚   message: "...",   â”‚
        â”‚   data: { ... } }    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”€ **DATA FLOW - HR TO HOSPITAL SYNC**

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   HR Java System    â”‚
                    â”‚                     â”‚
                    â”‚ - Employee 101      â”‚
                    â”‚ - Name: "Dr. A"     â”‚
                    â”‚ - Dept: "Cardio"    â”‚
                    â”‚                     â”‚
                    â”‚ âœ… Created/Updated  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ (Every 5 minutes)
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  API GATEWAY        â”‚
                    â”‚  (Node.js)          â”‚
                    â”‚                     â”‚
                    â”‚ â‘  Fetch HR data     â”‚
                    â”‚ â‘¡ Map fields        â”‚
                    â”‚ â‘¢ Send to Hospital  â”‚
                    â”‚                     â”‚
                    â”‚ Mapping:            â”‚
                    â”‚ emp_id â†’ employee_idâ”‚
                    â”‚ emp_name â†’ name     â”‚
                    â”‚ dept â†’ department   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â”‚ POST /api/doctors
                               â”‚ { name, dept,... }
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚  Hospital System    â”‚
                    â”‚                     â”‚
                    â”‚  â‘  Validate        â”‚
                    â”‚  â‘¡ Check duplicate  â”‚
                    â”‚  â‘¢ Create doctor   â”‚
                    â”‚                     â”‚
                    â”‚ Doctor ID: "doc_50" â”‚
                    â”‚ Status: "synced"    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   MongoDB            â”‚
                    â”‚                      â”‚
                    â”‚  doctors collection: â”‚
                    â”‚  {                   â”‚
                    â”‚    id: "doc_50",     â”‚
                    â”‚    name: "Dr. A",    â”‚
                    â”‚    department: "...",â”‚
                    â”‚    hr_employee_id:101â”‚
                    â”‚    sync_status:"sync"â”‚
                    â”‚  }                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… Sync complete - Doctor ready for appointments!
```

---

## ğŸ›¡ï¸ **SECURITY LAYERS**

```
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚         ATTACKER/HACKER              â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼ Tries to access
              
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  LAYER 1: AUTHENTICATION                        â”‚
    â”‚                                                 â”‚
    â”‚  âŒ No token? BLOCKED! (code: 3)               â”‚
    â”‚  âŒ Invalid token? BLOCKED! (code: 3)          â”‚
    â”‚  âœ“ Valid token? Continue...                    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  LAYER 2: AUTHORIZATION                         â”‚
    â”‚                                                 â”‚
    â”‚  âŒ Role = "viewer"? BLOCKED! (code: 4)        â”‚
    â”‚  âŒ Role = "doctor"? BLOCKED! (code: 4)        â”‚
    â”‚  âœ“ Role = "admin"? Continue...                 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  LAYER 3: VALIDATION                            â”‚
    â”‚                                                 â”‚
    â”‚  âŒ Missing fields? BLOCKED! (code: 1)         â”‚
    â”‚  âŒ Wrong data type? BLOCKED! (code: 1)        â”‚
    â”‚  âœ“ Valid data? Continue...                     â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  LAYER 4: BUSINESS LOGIC                        â”‚
    â”‚                                                 â”‚
    â”‚  âŒ Duplicate? BLOCKED! (code: 2)              â”‚
    â”‚  âŒ DB Error? BLOCKED! (code: 5)               â”‚
    â”‚  âœ“ All OK? CREATE DOCTOR                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
           âœ… SUCCESS! Doctor created!

Only users who pass ALL 4 layers can create data!
```

---

## ğŸ“‹ **ROLE-BASED ACCESS CONTROL (RBAC) TABLE**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Resource     â”‚ ADMIN     â”‚ DOCTOR   â”‚ USER     â”‚ VIEWER   â”‚ PUBLIC   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GET /doctors â”‚ âœ… YES    â”‚ âœ… YES   â”‚ âœ… YES   â”‚ âœ… YES   â”‚ âœ… YES   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /doctor â”‚ âœ… YES    â”‚ âŒ NO    â”‚ âŒ NO    â”‚ âŒ NO    â”‚ âŒ NO    â”‚
â”‚ (create)     â”‚           â”‚          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ PUT /doctors â”‚ âœ… YES    â”‚ âŒ NO    â”‚ âŒ NO    â”‚ âŒ NO    â”‚ âŒ NO    â”‚
â”‚ (update)     â”‚           â”‚          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DELETE /doc  â”‚ âœ… YES    â”‚ âŒ NO    â”‚ âŒ NO    â”‚ âŒ NO    â”‚ âŒ NO    â”‚
â”‚ (delete)     â”‚           â”‚          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ GET /appts   â”‚ âœ… YES    â”‚ âœ… YES   â”‚ âœ… YES   â”‚ âœ… YES   â”‚ âŒ NO    â”‚
â”‚ (own appts)  â”‚           â”‚          â”‚          â”‚          â”‚          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ POST /appt   â”‚ âœ… YES    â”‚ âœ… YES   â”‚ âœ… YES   â”‚ âŒ NO    â”‚ âŒ NO    â”‚
â”‚ (create)     â”‚           â”‚          â”‚          â”‚          â”‚          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
âœ… YES   = Access granted (continue)
âŒ NO    = Access denied (code: 4)
(No Auth needed) = Public route (no token required)
```

---

## ğŸ¯ **ERROR CODE VISUAL GUIDE**

```
                  ERROR CODES (0-5)
                        â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Code 0 â”‚      â”‚ Code 1 â”‚      â”‚ Code 2 â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚SUCCESS â”‚      â”‚ BAD    â”‚      â”‚CONFLICTâ”‚
    â”‚        â”‚      â”‚ REQUESTâ”‚      â”‚        â”‚
    â”‚âœ… OK  â”‚      â”‚âŒ Invalidâ”‚      â”‚âŒDup  â”‚
    â”‚        â”‚      â”‚  data  â”‚      â”‚        â”‚
    â”‚HTTP200 â”‚      â”‚HTTP400 â”‚      â”‚HTTP409 â”‚
    â”‚HTTP201 â”‚      â”‚        â”‚      â”‚        â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚               â”‚               â”‚
        â–¼               â–¼               â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Code 3 â”‚      â”‚ Code 4 â”‚      â”‚ Code 5 â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚UNAUTH  â”‚      â”‚FORBIDDENâ”‚     â”‚ SERVER â”‚
    â”‚        â”‚      â”‚        â”‚      â”‚ ERROR  â”‚
    â”‚âŒ No   â”‚      â”‚âŒ No   â”‚      â”‚âŒ DB  â”‚
    â”‚ Token  â”‚      â”‚ Perm   â”‚      â”‚ Error  â”‚
    â”‚        â”‚      â”‚        â”‚      â”‚        â”‚
    â”‚HTTP401 â”‚      â”‚HTTP403 â”‚      â”‚HTTP500 â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜

When to use:
- Code 0: Always on success
- Code 1: When data validation fails
- Code 2: When duplicate found
- Code 3: When token is missing/invalid
- Code 4: When user doesn't have permission
- Code 5: When database/server error occurs
```

---

## ğŸ”— **INTEGRATION BETWEEN SYSTEMS**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  USER JOURNEY                        â”‚
â”‚                                                       â”‚
â”‚ 1. HR Manager creates Employee in HR System          â”‚
â”‚    POST /api/employees â†’ Java API                    â”‚
â”‚    âœ… Employee 101 created                           â”‚
â”‚                                                       â”‚
â”‚ 2. API Gateway detects new employee (every 5 min)    â”‚
â”‚    GET /api/employees â†’ Java API                     â”‚
â”‚    Map to Doctor schema                              â”‚
â”‚    POST /api/doctors â†’ Hospital API                  â”‚
â”‚    âœ… Doctor synced                                  â”‚
â”‚                                                       â”‚
â”‚ 3. Patient books appointment with Doctor             â”‚
â”‚    POST /api/appointments?token=xxx â†’ Hospital       â”‚
â”‚    âœ… Appointment created                            â”‚
â”‚                                                       â”‚
â”‚ 4. Doctor logs in and sees appointment               â”‚
â”‚    GET /api/appointments/doctor/:id â†’ Hospital       â”‚
â”‚    âœ… Shows appointment from Hospital DB             â”‚
â”‚                                                       â”‚
â”‚ 5. HR wants to check who's on duty today             â”‚
â”‚    GET /api/gateway/hospital/doctors â†’ Gateway       â”‚
â”‚    â†’ Gets doctors from Hospital DB                   â”‚
â”‚    âœ… Knows which HR employees are doctors on duty   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± **IMPLEMENTATION CHECKLIST WITH CHECKPOINTS**

```
PHASE 1: MIDDLEWARE (2-3 hours)
â”œâ”€ [ ] Create middleware/ folder
â”œâ”€ [ ] Create isAuthenticated.js
â”‚  â””â”€ [ ] Test: curl with/without token
â”œâ”€ [ ] Create validateDoctor.js
â”‚  â””â”€ [ ] Test: curl with missing fields
â”œâ”€ [ ] Create roleBasedAccess.js
â”‚  â””â”€ [ ] Test: curl with viewer token (should fail on POST)
â”œâ”€ [ ] Create errorHandler.js
â”‚  â””â”€ [ ] Test: create duplicate doctor (should get code 2)
â”œâ”€ [ ] Create logging.js
â”‚  â””â”€ [ ] Test: check console logs
â””â”€ [ ] CHECKPOINT 1 PASSED âœ“

PHASE 2: ROUTES & SETUP (1-2 hours)
â”œâ”€ [ ] Update index.js with middleware order
â”œâ”€ [ ] Update doctorRoutes.js with middleware
â”œâ”€ [ ] Test all doctor endpoints
â”‚  â”œâ”€ [ ] GET /doctors (public)
â”‚  â”œâ”€ [ ] POST /doctors (admin only)
â”‚  â”œâ”€ [ ] PUT /doctors/:id (admin only)
â”‚  â””â”€ [ ] DELETE /doctors/:id (admin only)
â””â”€ [ ] CHECKPOINT 2 PASSED âœ“

PHASE 3: TESTING (1 hour)
â”œâ”€ [ ] Test all error codes (0-5)
â”œâ”€ [ ] Test authentication (code 3)
â”œâ”€ [ ] Test authorization (code 4)
â”œâ”€ [ ] Test validation (code 1)
â”œâ”€ [ ] Test duplicate (code 2)
â””â”€ [ ] CHECKPOINT 3 PASSED âœ“

READY FOR PRESENTATION! ğŸ‰
```

---

**Visual guides make understanding easier!** ğŸ“Š
